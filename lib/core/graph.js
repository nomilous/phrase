// Generated by CoffeeScript 1.6.3
var PhraseNode, PhraseTree;

PhraseNode = require('../phrase/node');

PhraseTree = require('../phrase/tree');

module.exports.create = function(core) {
  var util;
  util = core.util;
  return core.assembler = function(msg, next) {
    var assemblyOpts, newPhraseControl, newPhraseFn, newPhraseTitle, newPhraseUUID, newRoot, srcControl, srcPhrase, srcRoot;
    console.log(msg.context.title, {
      UUID: msg.root.uuid
    });
    if (msg.context.title === 'boundry::edge:create') {
      srcPhrase = msg.vertices[0];
      srcControl = msg.control;
      srcRoot = msg.root;
      newPhraseTitle = msg.vertices[1].phrase.title;
      newPhraseControl = msg.vertices[1].phrase.control;
      newPhraseUUID = msg.vertices[1].phrase.control.uuid || util.uuid();
      newPhraseFn = msg.vertices[1].phrase;
      assemblyOpts = msg.vertices[1].opts;
      newRoot = core.root(newPhraseUUID);
      newRoot.context = {
        PhraseTree: PhraseTree.createClass(root),
        PhraseNode: PhraseNode.createClass(root)
      };
    }
    return next();
  };
};
