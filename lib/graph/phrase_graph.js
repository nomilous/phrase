// Generated by CoffeeScript 1.6.3
exports.create = function(root) {
  var api, edges, vertices;
  vertices = {};
  edges = {};
  api = {
    assembler: function(msg, next) {
      if (msg.context.title === 'phrase::edge:create') {
        return api.registerEdge(msg, next);
      } else {
        return next();
      }
    },
    registerEdge: function(msg, next) {
      var vertex1, vertex2, _name, _name1, _ref;
      _ref = msg.vertices, vertex1 = _ref[0], vertex2 = _ref[1];
      vertices[vertex1.uuid] = vertex1;
      vertices[vertex2.uuid] = vertex2;
      edges[_name = vertex1.uuid] || (edges[_name] = []);
      edges[vertex1.uuid].push({
        connect: vertex2.uuid
      });
      edges[_name1 = vertex2.uuid] || (edges[_name1] = []);
      edges[vertex2.uuid].push({
        connect: vertex1.uuid
      });
      return next();
    }
  };
  Object.defineProperty(api, 'vertices', {
    enumerable: true,
    get: function() {
      return vertices;
    }
  });
  return Object.defineProperty(api, 'edges', {
    enumerable: true,
    get: function() {
      return edges;
    }
  });
};
